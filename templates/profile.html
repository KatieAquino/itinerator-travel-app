{% extends 'base.html' %}

{% block title %}{{ username }} Profile{% endblock %}


{% block body %}
  <h1>Hi {{ username }}!</h1>
  <H2>Upcoming adventures:</H2>
    <div>
    <!-- Edit an itinerary -->
    <button type="button" 
              class="btn btn-primary" 
              data-toggle="collapse"
              data-target="edit-form"
              id="edit-itinerary"> Edit Itinerary</button>

        <div class="container">
          <div class="collapse" id="edit-form">
          <form action="/api/edit-itinerary" method="POST">
              <div class="form-group mx-sm-3 mb-2">
                <div class="form-group-row">
                  <label for="select-itinerary">Itinerary</label>
                  <select class="custom-select mr-sm-2" 
                          id="select-itinerary"
                          name='itinerary-id'>
                    <option selected>Choose...</option>
                    {% for item in itineraries %}
                      <option value={{ item.id }}>{{ item.name }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="form-group row">
                  <label for="edit-name">Update Name: </label>
                  <input type="text"
                        class="form-control"
                        placehoder="Update name?""
                        name="edit-name">
                </div>
                <div class="form-group row">
                  <label for="edit-start-date">Update Start Date: </label>
                  <input type="date"
                        class="form-control"
                        name="edit-start-date">
                </div>
                <div class="form-group row">
                  <label for="edit-end-date">Update End Date: </label>
                  <input type="date"
                        class="form-control"
                        name="edit-end-date">
                </div>
                <button type="submit" 
                        class="btn btn-primary"> Update </button>
      </div>
    </form>
    
    </div>
    </div>
    <div>
      <ul>
    {% for item in itineraries %}
      <li>
        <h3><a href="/itinerary/{{ item.id }}">
          {{ item.name }}</a></h3>
        <p>{{ item.start_date }}</p>
        <button type="button"
                    class="btn btn-primary"
                    data-toggle="modal"
                    data-target="#delete-itinerary-modal-{{ item.id}}">Delete</button>
            <div class="modal fade"
                  id="delete-itinerary-modal-{{ item.id }}"
                  tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="modal-delete-title">{{item.name}}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    Are you sure you would like to delete {{item.name}} from your itinerary?
                  </div>
                  <div class="modal-footer">
                    <button type="button"
                            class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    
                    <form id="delete-itinerary" method="POST">
                      <button type="button" 
                              class="btn btn-primary"
                              name="{{item.id}}"
                              value="{{item.id}}"
                              id="delete-itinerary-confirmed">Delete</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
      </li>
      
    {% endfor %}
  </ul>
</div>

  <div class="form-group mb-2">
    <button type="button" 
    class="btn btn-primary" 
    id="new-itinerary"> Create New Itinerary </button>

    <div class="container" id="itinerary-form">
      <form action="/api/create-itinerary" method="POST">
          
          <div class="form-group mx-sm-3 mb-2">
            <div class="form-group row">
              <label for="new-name">Name: </label>
              <input type="text"
                    class="form-control"
                    placehoder="Where are heading?""
                    name="new-name">
            </div>
            <div class="form-group row">
              <label for="start-date">Start Date: </label>
              <input type="date"
                    class="form-control"
                    name="start-date">
            </div>
            <div class="form-group row">
              <label for="end-date">End Date: </label>
              <input type="date"
                    class="form-control"
                    name="end-date">
            </div>
            <button type="submit" 
                    class="btn btn-primary"> Create </button>
          </div>
      </form>
    </div>

{% endblock %}