{% extends 'base.html' %}

{% block title %}Itinerary Details{% endblock %}


{% block body %}
  <ul> <H2>Upcoming adventures:</H2>
    
    {% for item in entry_details %}
      <li>
        <h3>{{ item.name }}</h3>
        <img src="{{ item.image }}" />
				<p>{{ item.comment }}</p>
				<p>{{ item.location }}</p>
				<p><a href="{{ item.url }}">
          Learn More at {{ item.url }} </a></p>
        
          <div class="form-group mb-2">
            <button type="button" 
            class="btn btn-primary" 
            id="edit-entry"> Edit </button>
  
            <div class="container" id="entry-form-edit">
            <form action="/api/update-entry/{{ item.id }}" method="POST">
  
                <div class="form-group mx-sm-3 mb-2">
                  <div class="form-group row">
                    <label for="name-edit">Change name: </label>
                    <input type="text"
                          class="form-control"
                          value="{{ item.name }}"
                          name="name-edit">
                  </div>
                  <div class="form-group row">
                    <label for="url-edit">Update website: </label>
                    <input type="text"
                          class="form-control"
                          value="{{ item.url }}"
                          name="url-edit">
                  </div>
                  <div class="form-group row">
                    <label for="comment-edit">Change comments: </label>
                    <textarea
                          class="form-control"
                          name="comment-edit">{{ item.comment }}
                        </textarea>
                  </div>
                  <button type="submit" 
                          class="btn btn-primary"> Update </button>
                </div>
            </form>
            
            <button type="button"
                    class="btn btn-primary"
                    data-toggle="modal"
                    data-target="#delete-entry-modal">Delete</button>
            <div class="modal fade"
                  id="delete-entry-modal"
                  tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="modal-delete-title">{{item.name}}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    Are you sure you would like to delete {{item.name}} from your itinerary?
                  </div>
                  <div class="modal-footer">
                    <button type="button"
                            class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    
                    <form id="delete-entry" method="POST">
                      <button type="button" 
                              class="btn btn-primary"
                              name="{{item.id}}"
                              value="{{item.id}}"
                              id="delete-confirmed">Delete</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          </div>
        </li>
      {% endfor %}
    </ul>

{% endblock %}